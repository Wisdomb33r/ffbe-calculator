<h2 mat-dialog-title>{{'calculation.defensive.magicalEhpCalculation' | translate}}</h2>
<mat-dialog-content>
  <table>
    <tr>
      <td>{{'hp' | translate}}</td>
      <td></td>
      <td>{{result.hp | integer}}</td>
    </tr>
    <tr>
      <td>{{'spr' | translate}}</td>
      <td></td>
      <td>{{result.spr | integer}}</td>
    </tr>
    <tr>
      <td>{{'calculation.display.groupBuff' | translate}}</td>
      <td>
        <mat-checkbox [(ngModel)]="algorithm.isSupportBuffing" (change)="calculateBuild()"></mat-checkbox>
      </td>
      <td>
        <select [(ngModel)]="algorithm.supportBuff" (change)="calculateBuild()">
          <option value="40">40%</option>
          <option value="60">60%</option>
          <option value="80">80%</option>
          <option value="90">90%</option>
          <option value="100">100%</option>
          <option value="110">110%</option>
          <option value="120">120%</option>
          <option value="130">130%</option>
          <option value="140">140%</option>
          <option value="150">150%</option>
          <option value="160">160%</option>
          <option value="170">170%</option>
          <option value="180">180%</option>
          <option value="190">190%</option>
          <option value="200">200%</option>
        </select>
      </td>
    </tr>
    <tr *ngIf="result.selfSprBuff">
      <td>{{'calculation.display.selfBuff' | translate}}</td>
      <td></td>
      <td>{{result.selfSprBuff | integer}}%</td>
    </tr>
    <tr>
      <td>{{'calculation.display.buffed_spr' | translate}}</td>
      <td></td>
      <td>{{result.buffedSpr | integer}}</td>
    </tr>
    <tr>
      <td>{{'calculation.defensive.supportMitigation' | translate}}</td>
      <td>
        <mat-checkbox [(ngModel)]="algorithm.isSupportMitigating" (change)="calculateBuild()"></mat-checkbox>
      </td>
      <td>
        <select [(ngModel)]="algorithm.supportMitigation" (change)="calculateBuild()">
          <option value="10">10%</option>
          <option value="15">15%</option>
          <option value="20">20%</option>
          <option value="25">25%</option>
          <option value="30">30%</option>
          <option value="40">40%</option>
        </select>
      </td>
    </tr>
    <tr *ngIf="result.mitigation">
      <td>{{'calculation.defensive.nativeMitigation' | translate}}</td>
      <td></td>
      <td>{{result.mitigation}}%</td>
    </tr>
    <tr>
      <td>{{'calculation.defensive.supportMagicalMitigation' | translate}}</td>
      <td>
        <mat-checkbox [(ngModel)]="algorithm.isSupportMagicalMitigating" (change)="calculateBuild()"></mat-checkbox>
      </td>
      <td>
        <select [(ngModel)]="algorithm.supportMagicalMitigation" (change)="calculateBuild()">
          <option value="10">10%</option>
          <option value="15">15%</option>
          <option value="20">20%</option>
          <option value="25">25%</option>
          <option value="30">30%</option>
          <option value="40">40%</option>
        </select>
      </td>
    </tr>
    <tr *ngIf="result.magicalMitigation">
      <td>{{'calculation.defensive.nativeMagicalMitigation' | translate}}</td>
      <td></td>
      <td>{{result.magicalMitigation}}%</td>
    </tr>
    <tr *ngIf="result.magicalCover">
      <td>{{'calculation.defensive.cover' | translate}}</td>
      <td>
        <mat-checkbox [(ngModel)]="algorithm.isMagicalCovering" (change)="switchCover()"></mat-checkbox>
      </td>
      <td>{{result.magicalCover}}%</td>
    </tr>
    <tr *ngIf="result.magicalResistance">
      <td>{{'calculation.defensive.magicalResistance' | translate}}</td>
      <td></td>
      <td>{{result.magicalResistance}}%</td>
    </tr>
  </table>
  <h3>{{'calculation.defensive.magicalEhp' | translate}}</h3>
  <p>{{result.hp | integer}} * {{result.buffedSpr | integer}}
    <span *ngIf="result.effectiveMitigation"> / (1-{{result.effectiveMitigation}}%)</span>
    <span *ngIf="result.effectiveMagicalMitigation"> / (1-{{result.effectiveMagicalMitigation}}%)</span>
    <span *ngIf="result.effectiveMagicalCover"> / (1-{{result.effectiveMagicalCover}}%)</span>
    <span *ngIf="result.magicalResistance"> / (1-{{result.magicalResistance}}%)</span>
  </p>
  <p>= <strong>{{result.magicalEffectiveHp | integer}}</strong></p>
</mat-dialog-content>
